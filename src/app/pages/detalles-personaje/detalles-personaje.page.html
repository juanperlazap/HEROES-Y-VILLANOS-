<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="volverAInicio()" fill="clear" color="dark">
        <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{ personaje?.name }}</ion-title>

    <ion-buttons slot="end">
      <ion-button (click)="alternarFavorito()" fill="clear" [color]="esFavorito ? 'warning' : 'medium'">
        <ion-icon [name]="esFavorito ? 'star' : 'star-outline'" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="!cargando && personaje">

  <!-- Nombre arriba centrado limpio -->
  <h1 class="nombre-principal">{{ personaje.name }}</h1>

  <!-- Imagen -->
  <div class="contenedor-imagen">
    <img [src]="personaje.image" [alt]="personaje.name" class="imagen-principal">
  </div>

  <!-- Etiquetas -->
  <div class="etiquetas">
    <span class="etiqueta heroe" *ngIf="personaje.affiliation === 'Hero'">Héroe</span>
    <span class="etiqueta villano" *ngIf="personaje.affiliation === 'Villain'">Villano</span>
    <span class="etiqueta universo">{{ personaje.universe }}</span>
  </div>

  <!-- BIO -->
  <div class="seccion">
    <h2 class="titulo-seccion">Biografía</h2>
    <p class="texto-descripcion">{{ personaje.biography }}</p>
  </div>

  <!-- Poderes -->
  <div class="seccion" *ngIf="personaje.powers?.length">
    <h2 class="titulo-seccion">Poderes</h2>
    <div class="chips">
      <span class="chip" *ngFor="let poder of personaje.powers">{{ poder }}</span>
    </div>
  </div>

  <!-- Debilidades -->
  <div class="seccion" *ngIf="personaje.weaknesses?.length">
    <h2 class="titulo-seccion">Debilidades</h2>
    <div class="chips">
      <span class="chip debilidad" *ngFor="let d of personaje.weaknesses">{{ d }}</span>
    </div>
  </div>

  <!-- Stats -->
  <div class="seccion" *ngIf="powerStatsArray.length">
    <h2 class="titulo-seccion">Estadísticas</h2>

    <div class="stats-grid">
      <div class="stat-item" *ngFor="let stat of powerStatsArray">
        <div class="stat-value">{{ stat.value }}</div>
        <div class="stat-name">{{ stat.name }}</div>
      </div>
    </div>
  </div>

</ion-content>

<div *ngIf="cargando" class="cargando">
  <p>Cargando...</p>
</div>